---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "clock_plots.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: clock_plots.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Making-Clock-Plots">Making Clock Plots<a class="anchor-link" href="#Making-Clock-Plots"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to make a clock plot, we need timing data with specific information we'd like to display on the plot. Therefore, it is recommended that the dataframes used are loaded after being processed using the <strong>analyze_by_person</strong> module included in the SALA library.</p>
<p>The sample plots here will be generated using the same example data found in the aforementioned package. Thus, we'll start by loading the parquet files written by the functions found there.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_prefix</span> <span class="o">=</span> <span class="s2">&quot;example_output/&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">all_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_prefix</span><span class="o">+</span><span class="s1">&#39;raw.parquet&#39;</span><span class="p">)</span>
<span class="n">all_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Off-Wrist Status</th>
      <th>Activity</th>
      <th>Marker</th>
      <th>White Light</th>
      <th>Red Light</th>
      <th>Green Light</th>
      <th>Blue Light</th>
      <th>Sleep/Wake</th>
      <th>Interval Status</th>
      <th>UID</th>
      <th>Group</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-05-07 11:28:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:28:30</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:29:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:29:30</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:30:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">timing_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_prefix</span><span class="o">+</span><span class="s1">&#39;timing.parquet&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;fastparquet&#39;</span><span class="p">)</span>
<span class="n">timing_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>UID</th>
      <th>Date</th>
      <th>Threshold</th>
      <th>Last Light</th>
      <th>Mins to LL from 4AM</th>
      <th>First Light</th>
      <th>Mins to FL from 4AM</th>
      <th>Time above threshold</th>
      <th>Time above threshold AM</th>
      <th>Minutes above threshold</th>
      <th>...</th>
      <th>GroupDayofWeek</th>
      <th>GroupDayType</th>
      <th>Weekend/Holiday</th>
      <th>Sunrise</th>
      <th>Sunset</th>
      <th>Sleep onset</th>
      <th>Sleep offset</th>
      <th>Sleep duration</th>
      <th>Sleep onset MSLM</th>
      <th>Sleep offset MSLM</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>v1data\Hero</td>
      <td>2018-05-17</td>
      <td>5</td>
      <td>2018-05-17 21:23:30</td>
      <td>1043.0</td>
      <td>2018-05-17 06:19:30</td>
      <td>139.0</td>
      <td>0 days 10:16:30</td>
      <td>0 days 04:52:00</td>
      <td>616.5</td>
      <td>...</td>
      <td>v1Thu</td>
      <td>v1Weekday</td>
      <td>False</td>
      <td>2018-05-16 20:12:37.264718+00:00</td>
      <td>2018-05-17 11:21:24.640097+00:00</td>
      <td>2018-05-17 21:50:00</td>
      <td>2018-05-18 05:31:00</td>
      <td>0 days 07:41:00</td>
      <td>1310.0</td>
      <td>331.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>v1data\Hero</td>
      <td>2018-05-11</td>
      <td>5</td>
      <td>2018-05-11 21:52:30</td>
      <td>1072.0</td>
      <td>2018-05-11 06:15:30</td>
      <td>135.0</td>
      <td>0 days 10:17:00</td>
      <td>0 days 05:04:30</td>
      <td>617.0</td>
      <td>...</td>
      <td>v1Fri</td>
      <td>v1Weekday</td>
      <td>False</td>
      <td>2018-05-10 20:20:17.050530+00:00</td>
      <td>2018-05-11 11:13:48.602636+00:00</td>
      <td>2018-05-11 21:58:30</td>
      <td>2018-05-12 05:05:00</td>
      <td>0 days 07:06:30</td>
      <td>1318.5</td>
      <td>305.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>v1data\Hero</td>
      <td>2018-05-13</td>
      <td>5</td>
      <td>2018-05-13 21:33:00</td>
      <td>1053.0</td>
      <td>2018-05-13 06:26:30</td>
      <td>146.0</td>
      <td>0 days 13:16:30</td>
      <td>0 days 05:03:30</td>
      <td>796.5</td>
      <td>...</td>
      <td>v1Sun</td>
      <td>v1Weekend/Holiday</td>
      <td>True</td>
      <td>2018-05-12 20:17:36.639310+00:00</td>
      <td>2018-05-13 11:16:23.346370+00:00</td>
      <td>2018-05-13 21:39:30</td>
      <td>2018-05-14 05:16:30</td>
      <td>0 days 07:37:00</td>
      <td>1299.5</td>
      <td>316.5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>v1data\Hero</td>
      <td>2018-05-21</td>
      <td>5</td>
      <td>2018-05-21 22:39:30</td>
      <td>1119.0</td>
      <td>2018-05-21 05:29:30</td>
      <td>89.0</td>
      <td>0 days 12:43:30</td>
      <td>0 days 05:39:00</td>
      <td>763.5</td>
      <td>...</td>
      <td>v1Mon</td>
      <td>v1Weekday</td>
      <td>False</td>
      <td>2018-05-20 20:08:08.562556+00:00</td>
      <td>2018-05-21 11:26:12.538105+00:00</td>
      <td>2018-05-21 22:50:00</td>
      <td>2018-05-22 06:00:30</td>
      <td>0 days 07:10:30</td>
      <td>1370.0</td>
      <td>360.5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>v1data\Hero</td>
      <td>2018-05-14</td>
      <td>5</td>
      <td>2018-05-15 01:09:30</td>
      <td>1269.0</td>
      <td>2018-05-14 05:27:00</td>
      <td>87.0</td>
      <td>0 days 08:35:30</td>
      <td>0 days 03:49:30</td>
      <td>515.5</td>
      <td>...</td>
      <td>v1Mon</td>
      <td>v1Weekday</td>
      <td>False</td>
      <td>2018-05-13 20:16:19.055530+00:00</td>
      <td>2018-05-14 11:17:39.760167+00:00</td>
      <td>2018-05-14 21:37:30</td>
      <td>2018-05-15 06:18:00</td>
      <td>0 days 08:40:30</td>
      <td>1297.5</td>
      <td>378.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="map_mins_to_rads" class="doc_header"><code>map_mins_to_rads</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L6" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>map_mins_to_rads</code>(<strong><code>d_series</code></strong>)</p>
</blockquote>
<p>Maps a series of minutes to radians for plot making.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>d_series: pd.Series
    A series of minute data</p>
<h4 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h4><p>(as a tuple) list of mins converted to radians, a converted median</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="time_print" class="doc_header"><code>time_print</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>time_print</code>(<strong><code>mins</code></strong>:<code>float</code>)</p>
</blockquote>
<p>Takes a time (minutes) and returns a printable format.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>mins: float
    A numeric value representing minutes.</p>
<h4 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h4><p>A printable format</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_clock_plots" class="doc_header"><code>make_clock_plots</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_clock_plots</code>(<strong><code>timing_data</code></strong>, <strong><code>group_by</code></strong>:<code>str</code>, <strong><code>thresholds</code></strong>:<code>list</code>=<em><code>[]</code></em>, <strong><code>figsize</code></strong>:<code>tuple</code>=<em><code>(5, 10)</code></em>)</p>
</blockquote>
<p>Creates clock plots for a grouping within timing data.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>timing_data: pd.DataFrame</p>

<pre><code>Timing data to use. Must be processed by the analyze_by_person package within SALA
</code></pre>
<p>group_by: str</p>

<pre><code>String to subset the timing data for
</code></pre>
<p>thresholds: list</p>

<pre><code>List of light thresholds.
</code></pre>
<p>figsize: tuple</p>

<pre><code>Desired size of outputted figure</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

