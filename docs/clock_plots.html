---

title: Making Clock Plots


keywords: fastai
sidebar: home_sidebar

summary: "Module takes timing data processed by 'analyze_by_person and outputs"
description: "Module takes timing data processed by 'analyze_by_person and outputs"
nb_path: "clock_plots.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: clock_plots.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to make a clock plot, we need timing data with specific information we'd like to display on the plot. Therefore, it is recommended that the dataframes used are loaded after being processed using the <strong>analyze_by_person</strong> module included in the SALA library.</p>
<p>The sample plots here will be generated using the same example data found in the aforementioned package. Thus, we'll start by loading the parquet files written by the functions found there. Of particular interest are columns relating to light timings and sleep information.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_prefix</span> <span class="o">=</span> <span class="s2">&quot;example_output/&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">all_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_prefix</span><span class="o">+</span><span class="s1">&#39;raw.parquet&#39;</span><span class="p">)</span>
<span class="n">all_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Off-Wrist Status</th>
      <th>Activity</th>
      <th>Marker</th>
      <th>White Light</th>
      <th>Red Light</th>
      <th>Green Light</th>
      <th>Blue Light</th>
      <th>Sleep/Wake</th>
      <th>Interval Status</th>
      <th>UID</th>
      <th>Group</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-05-07 11:28:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:28:30</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:29:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:29:30</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
    <tr>
      <th>2018-05-07 11:30:00</th>
      <td>0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ACTIVE</td>
      <td>v1data\Hero</td>
      <td>v1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">timing_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_prefix</span><span class="o">+</span><span class="s1">&#39;timing.parquet&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;fastparquet&#39;</span><span class="p">)</span>
<span class="n">timing_data</span><span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;Mins to LL from 4AM&quot;</span><span class="p">,</span> <span class="s2">&quot;Mins to FL from 4AM&quot;</span><span class="p">,</span>
     <span class="s2">&quot;Sunrise&quot;</span><span class="p">,</span> <span class="s2">&quot;Sunset&quot;</span><span class="p">,</span> <span class="s2">&quot;Sleep onset&quot;</span><span class="p">,</span> <span class="s2">&quot;Sleep offset&quot;</span><span class="p">,</span>
     <span class="s2">&quot;Sleep duration&quot;</span><span class="p">,</span> <span class="s2">&quot;Sleep onset MSLM&quot;</span><span class="p">,</span>
     <span class="s2">&quot;Sleep offset MSLM&quot;</span><span class="p">]</span>
    <span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Mins to LL from 4AM</th>
      <th>Mins to FL from 4AM</th>
      <th>Sunrise</th>
      <th>Sunset</th>
      <th>Sleep onset</th>
      <th>Sleep offset</th>
      <th>Sleep duration</th>
      <th>Sleep onset MSLM</th>
      <th>Sleep offset MSLM</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1048.0</td>
      <td>130.0</td>
      <td>2018-05-21 20:07:06.463156+00:00</td>
      <td>2018-05-22 11:27:22.047832+00:00</td>
      <td>2018-05-22 21:33:30</td>
      <td>2018-05-23 05:22:30</td>
      <td>0 days 07:49:00</td>
      <td>1293.5</td>
      <td>322.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1321.0</td>
      <td>91.0</td>
      <td>2018-05-15 20:13:49.329097+00:00</td>
      <td>2018-05-16 11:20:10.452788+00:00</td>
      <td>2018-05-17 02:13:30</td>
      <td>2018-05-17 06:03:30</td>
      <td>0 days 03:50:00</td>
      <td>1573.5</td>
      <td>363.5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1269.0</td>
      <td>87.0</td>
      <td>2018-05-13 20:16:19.055530+00:00</td>
      <td>2018-05-14 11:17:39.760167+00:00</td>
      <td>2018-05-14 21:37:30</td>
      <td>2018-05-15 06:18:00</td>
      <td>0 days 08:40:30</td>
      <td>1297.5</td>
      <td>378.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>999.0</td>
      <td>108.0</td>
      <td>2018-05-08 20:23:04.188246+00:00</td>
      <td>2018-05-09 11:11:11.579525+00:00</td>
      <td>1970-01-01 00:00:00</td>
      <td>1970-01-01 00:00:00</td>
      <td>0 days 00:00:00</td>
      <td>-25430400.0</td>
      <td>-25431840.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1072.0</td>
      <td>135.0</td>
      <td>2018-05-10 20:20:17.050530+00:00</td>
      <td>2018-05-11 11:13:48.602636+00:00</td>
      <td>2018-05-11 21:58:30</td>
      <td>2018-05-12 05:05:00</td>
      <td>0 days 07:06:30</td>
      <td>1318.5</td>
      <td>305.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="map_mins_to_rads" class="doc_header"><code>map_mins_to_rads</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L6" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>map_mins_to_rads</code>(<strong><code>d_series</code></strong>)</p>
</blockquote>
<p>Maps a series of minutes to radians for plot making.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>d_series: pd.Series
    A series of minute data</p>
<h4 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h4><p>(as a tuple) list of mins converted to radians, a converted median</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="time_print" class="doc_header"><code>time_print</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L25" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>time_print</code>(<strong><code>mins</code></strong>:<code>float</code>)</p>
</blockquote>
<p>Takes a time (minutes) and returns a printable format.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>mins: float
    A numeric value representing minutes.</p>
<h4 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h4><p>A printable format</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="make_clock_plots" class="doc_header"><code>make_clock_plots</code><a href="https://github.com/tktran11/SALA/tree/master/SALA/clock_plots.py#L44" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>make_clock_plots</code>(<strong><code>timing_data</code></strong>, <strong><code>group_by</code></strong>:<code>str</code>, <strong><code>thresholds</code></strong>:<code>list</code>=<em><code>[]</code></em>, <strong><code>figsize</code></strong>:<code>tuple</code>=<em><code>(5, 10)</code></em>)</p>
</blockquote>
<p>Creates clock plots for a grouping within timing data.</p>
<h4 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h4><p>timing_data: pd.DataFrame</p>

<pre><code>Timing data to use. Must be processed by the analyze_by_person package within SALA
</code></pre>
<p>group_by: str</p>

<pre><code>String to subset the timing data for
</code></pre>
<p>thresholds: list</p>

<pre><code>List of light thresholds.
</code></pre>
<p>figsize: tuple</p>

<pre><code>Desired size of outputted figure</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="TODO:-Add-examples-of-Clock-Plots">TODO: Add examples of Clock Plots<a class="anchor-link" href="#TODO:-Add-examples-of-Clock-Plots"> </a></h2>
</div>
</div>
</div>
</div>
 

